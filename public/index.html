<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="Cache-Control" content="private, max-age=0, no-cache, no-store" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<title>Marfeel Flowcards - Playground</title>
	<link rel="preconnect" href="https://fonts.gstatic.com" />
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="./css/styles.css" />
	<link rel="icon" href="./assets/favicon.png" />
</head>
<body>
	<a href="https://github.com/Marfeel/flowcards-playground" target="_blank" title="Fork in GitHub"
		class="github-corner">
		<svg width="80" height="80" viewBox="0 0 250 250" style="position: fixed; top: 0; border: 0; right: 0;">
			<path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
			<path
				d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
				fill="white" style="transform-origin: 130px 106px;" class="octo-arm"></path>
			<path
				d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
				fill="white" class="octo-body"></path>
		</svg>
	</a>
	<header>
		<img src="./assets/logo.svg" style="max-width: 100%; height: auto;" />
	</header>
	<div class="container">
		<h1>Show the right message,<span>to the right people,</span><span>at the right time.</span></h1>
		<form action="https://playground.mrf.io/simulate" method="get" id="form">
			<div class="form">
				<input id="siteUrl" name="siteUrl" value="" class="form__input" placeholder="Enter your website URL" />
				<input type="hidden" id="requestHostname" name="requestHostname" />
				<div class="card-type" title="Page technology">
					<input id="technologyWeb" name="technology" type="radio" class="form__radio" value="web" checked />
					<label for="technologyWeb">Web</label>
					<input id="technologyAmp" name="technology" type="radio" class="form__radio" value="amp" />
					<label for="technologyAmp">AMP</label>
				</div>
				<button class="form__button" type="submit">
					Simulate
				</button>
				<div class="mobile-cta">
					<button class="form__button" type="submit">
						Simulate
					</button>
				</div>
			</div>
			<div class="grid-cards">
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/homepage/homepage.json" checked />
					<div class="card selected">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/homepage/homepage.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-homepage-425w.png" />
							<img class="card__image" src="./assets/cards/card-homepage.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Homepage</h3>
							<p class="card__text">
								Show the homepage of your site to any reader landing on an
								article.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio"
						value="/experiences/featured_article/featured_article.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/featured_article/featured_article.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-hero-425w.png" />
							<img class="card__image" src="./assets/cards/card-hero.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Featured article</h3>
							<p class="card__text">
								Featured article with a Hero Image orchestration.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/top_articles/top_articles.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/top_articles/top_articles.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-top-articles-425w.png" />
							<img class="card__image" src="./assets/cards/card-top-articles.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Top articles</h3>
							<p class="card__text">
								List of Top articles.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/taboola/taboola.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/taboola/taboola.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-taboola-425w.png" />
							<img class="card__image" src="./assets/cards/card-taboola.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Taboola</h3>
							<p class="card__text">
								Load native ads directly in a Flowcard
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/multicard/multicard.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/multicard/multicard.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-multicard-425w.png" />
							<img class="card__image" src="./assets/cards/card-multicard.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Multicard</h3>
							<p class="card__text">
								Multicard experience. Show multiple cards to a user with different snap points.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/newsletter/newsletter.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/newsletter/newsletter.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-newsletter-425w.png" />
							<img class="card__image" src="./assets/cards/card-newsletter.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Newsletter</h3>
							<p class="card__text">
								Flowcard to subscribe to newsletters.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/paywall/paywall.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/paywall/paywall.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-paywall-425w.png" />
							<img class="card__image" src="./assets/cards/card-paywall.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Paywall</h3>
							<p class="card__text">
								Flowcard for Paywall with a modal experience.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="/experiences/facebook/facebook.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/facebook/facebook.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-facebook-425w.png" />
							<img class="card__image" src="./assets/cards/card-facebook.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Facebook fan-page</h3>
							<p class="card__text">
								Show the Facebook fan-page to engage your audience and get new
								followers.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input id="experienceUrl" name="experienceUrl" type="radio"
						value="/experiences/telegram/telegram.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/telegram/telegram.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-telegram-425w.png" />
							<img class="card__image" src="./assets/cards/card-telegram.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Telegram</h3>
							<p class="card__text">
								Social strategy is key to diversify revenues. Get new
								followers and embrace your community.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input id="experienceUrl" name="experienceUrl" type="radio"
						value="/experiences/push_notifications/push_notifications.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/push_notifications/push_notifications.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-notifications-425w.png" />
							<img class="card__image" src="./assets/cards/card-notifications.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Push Notifications</h3>
							<p class="card__text">
								Notifications with a scroll-bounded transition
							</p>
						</div>
					</div>
				</label>
				<label>
					<input id="experienceUrl" name="experienceUrl" type="radio"
						value="/experiences/comments/comments.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/comments/comments.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-comments-425w.png" />
							<img class="card__image" src="./assets/cards/card-comments.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Comments</h3>
							<p class="card__text">
								Comments presented in the right context. Increase your engagement.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="croupier"
						data-siteUrl="https://playground.marfeel.com/templates/branded-content-article.html" />
					<div class="card">
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-branded-dfp-425w.png" />
							<img class="card__image" src="./assets/cards/card-branded-dfp.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Branded Content</h3>
							<p class="card__text">
								Define a branded content article from AdManager and load it in a Flowcard.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input name="experienceUrl" type="radio" value="croupier"
						data-siteUrl="https://playground.marfeel.com/templates/article-contextual-link.html" />
					<div class="card">
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-related-425w.png" />
							<img class="card__image" src="./assets/cards/card-related.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Contextual link</h3>
							<p class="card__text">
								Automatically load in-text links as the user reads through an article.
							</p>
						</div>
					</div>
				</label>
				<label>
					<input id="experienceUrl" name="experienceUrl" type="radio"
						value="/experiences/podcast/podcast.json" />
					<div class="card">
						<div class="card__btn-placeholder">
							<a class="card__btn-sandbox"
								href="https://codesandbox.io/s/github/Marfeel/flowcards-playground/tree/master?file=/experiences/podcast/podcast.json"
								target="_blank" rel="noopener noreferrer">Open Sandbox</a>
						</div>
						<picture>
							<source media="(max-width: 425px)" srcset="./assets/cards/card-podcast-425w.png" />
							<img class="card__image" src="./assets/cards/card-podcast.png" />
						</picture>
						<div class="card__content">
							<h3 class="card__title">Podcasts</h3>
							<p class="card__text">
								Listen podcasts without leaving the page directly on a FlowCard.
							</p>
						</div>
					</div>
				</label>
			</div>
		</form>
	</div>
	<footer>
		<div class="footer-brand">
			<a href="https://www.marfeel.com" target="_blank">
				<img class="footer-brand__img"
					src="https://www.marfeel.com/public/images/landing/header/logo-marfeel.svg">
			</a>
			<ul class="footer-brand__links">
				<li><a href="https://www.marfeel.com/docs/flowcards/flowcards-playground.html"
						target="_blank">Documentation</a></li>
				<li><a href="https://github.com/Marfeel/flowcards-playground"
						aria-label="Fork Marfeel/flowcards-playground on GitHub" target="_blank">
						<img class="github-logo" src="./assets/github.svg" alt="Fork on GitHub">GitHub
					</a>
				</li>
			</ul>
		</div>
		<div class="footer__copy">
			© 2021 Marfeel, Inc. – All rights reserved.
		</div>
	</footer>
	<script>
		let isLastSiteUrlFixed = false;
		let customSiteUrl = '';
		const myForm = document.getElementById("form");
		const cards = myForm.querySelectorAll("input[name='experienceUrl']");
		const input = document.querySelector(".form__input");
		const button = document.querySelectorAll(".form__button");
		const requestHostname = document.getElementById("requestHostname");
		requestHostname.value = window.location.hostname;

		const fillInput = () => {
			const urlParams = new URLSearchParams(window.location.search);
			const siteUrlParam = urlParams.get('siteUrl');
			input.value = siteUrlParam
				? addProtocol(siteUrlParam)
				: `${window.location.origin}/templates/article-skeleton.html`
		};

		const stateHandle = (e) => {
			if (e.target.value.length === 0) {
				button.forEach((btn) => {
					btn.disabled = true;
					btn.style.cursor = "not-allowed";
				});
			} else if (e.target.value.length > 0) {
				button.forEach((btn) => {
					btn.disabled = false;
					btn.style.cursor = "pointer";
				});
			}
		};

		const addProtocol = (url) => {
			if (!/^(?:f|ht)tps?\:\/\//.test(url)) {
				url = "https://" + url;
			}

			return url;
		}

		const onSubmit = (e) => {
			const siteUrl = document.querySelector("input[name=siteUrl]").value;
			document.querySelector("input[name=siteUrl]").value = addProtocol(siteUrl);
		};

		const toggleFormStatus = (e) => {
			const textInput = myForm.querySelector('#siteUrl');
			const cardTypeWrapper = myForm.querySelector('.card-type');
			const webInput = myForm.querySelector('#technologyWeb');
			const ampInput = myForm.querySelector('#technologyAmp');

			customSiteUrl = isLastSiteUrlFixed ? customSiteUrl : textInput.value

			if (!!e.target.dataset.siteurl) {
				textInput.value = e.target.dataset.siteurl;
				cardTypeWrapper.classList.add('read-only');
				isLastSiteUrlFixed = true;
			} else {
				cardTypeWrapper.classList.remove('read-only');
				textInput.value = customSiteUrl;
				isLastSiteUrlFixed = false;
			}

			textInput.readOnly = !!e.target.dataset.siteurl;
			webInput.disabled = !!e.target.dataset.siteurl;
			ampInput.disabled = !!e.target.dataset.siteurl;
		};

		cards.forEach(card => {
			card.addEventListener("change", toggleFormStatus);
		});

		input.addEventListener("input", stateHandle);
		myForm.addEventListener("submit", onSubmit);
		fillInput();
	</script>
</body>
</html>
